# AImind 用户使用指南

版本: 1.0.0
更新日期: 2025-12-29

## 📖 目录

1. [快速开始](#快速开始)
2. [基础操作](#基础操作)
3. [编辑功能](#编辑功能)
4. [字体样式](#字体样式)
5. [AI功能](#ai功能)
6. [快捷键](#快捷键)
7. [常见问题](#常见问题)

---

## 🚀 快速开始

### 启动应用

```bash
npm install
npm run dev
```

应用将在 `http://localhost:5173` 启动

### 创建第一个思维导图

1. 启动应用后，会自动创建一个根节点
2. **双击**节点或按 **Space** 键开始编辑
3. 输入内容后按 **Enter** 或点击外部保存

---

## 🎯 基础操作

### 节点选择

- **单击节点**: 选中节点（显示蓝色边框）
- **单击画布**: 取消选择

### 添加节点

#### 方法1：使用快捷按钮
- 选中节点后，**悬停**在节点上，右上角会出现 **蓝色+按钮**
- 点击该按钮，即可添加子节点

#### 方法2：使用快捷键
- **Tab**: 添加子节点
- **Enter**: 添加兄弟节点（同级节点）

#### 方法3：右键菜单
- **右键点击**节点 → 选择"添加子节点"或"添加兄弟节点"

### 删除节点

- 选中节点后按 **Delete** 键
- 或右键菜单 → 选择"删除"
- ⚠️ **注意**: 根节点不能删除

### 复制节点

- 选中节点后按 **Ctrl+C**
- 或右键菜单 → 选择"复制"

### 移动节点

**拖拽移动**:
1. 按住节点拖动
2. 拖动到目标节点上（目标节点会显示绿色边框）
3. 松开鼠标，该节点会成为目标节点的子节点

### 折叠/展开节点

- 节点左侧有 **折叠按钮**（箭头图标）
- 点击按钮或按 **/** 键切换折叠状态

---

## ✏️ 编辑功能

### 进入编辑模式

**方式1：双击**
- 双击节点直接进入编辑

**方式2：快捷键**
- 选中节点后按 **Space** 键

**方式3：右键菜单**
- 右键节点 → 选择"编辑"

### 保存编辑

- **Enter**: 保存并退出编辑
- **点击外部**: 自动保存并退出编辑
- **Escape**: 取消编辑（恢复原内容）

### 中文输入

- 完美支持中文输入法
- 使用拼音输入法时不会意外退出编辑
- 输入完成后按 Enter 保存

### 多行文本

- **Shift+Enter**: 在编辑时插入换行
- 支持多行文本显示

---

## 🎨 字体样式

### 打开字体样式面板

**方式1：快捷按钮（推荐）**
1. 选中节点
2. 节点**右下角**会出现 **紫色T按钮**
3. 点击该按钮打开字体样式面板

**方式2：右键菜单**
- 右键节点 → 选择"字体样式..."

### 字体样式功能

字体样式面板支持以下调整：

#### 1. 字体类型
- 微软雅黑
- 宋体
- 黑体
- Arial
- Times New Roman
- Courier New

#### 2. 字体大小
- **滑块调节**: 12px - 72px 连续调节
- **预设值**: 快速选择常用字号（12/14/16/18/20/24/28/32/36/48/64/72）

#### 3. 字体粗细
- **常规**: 400
- **中等**: 500
- **粗体**: 700

#### 4. 文字颜色
- **颜色选择器**: 自定义任意颜色
- **预设颜色**: 8种常用颜色
  - 黑色、白色、红色、橙色
  - 绿色、蓝色、紫色、粉色

#### 5. 样式效果
- **斜体**: 点击切换斜体样式
- **下划线**: 点击切换下划线样式

#### 6. 文本对齐
- **左对齐**: 文字靠左显示
- **居中**: 文字居中显示
- **右对齐**: 文字靠右显示

### 实时预览

字体样式面板底部有**预览区域**，可以实时查看效果：
- 显示"示例文本"
- 实时反映所有样式调整
- 字体大小限制在24px以便预览

### 应用样式

- 所有调整**实时生效**
- 点击面板外部即可关闭面板
- 下次打开该节点面板会保持上次选择

---

## 🤖 AI功能

### AI智能扩展

**快捷键：Ctrl+J** (开发中)

使用AI自动生成思维导图内容：
1. 选中一个节点
2. 按下 **Ctrl+J**
3. AI会根据节点内容自动生成子节点

### AI Provider配置

支持多个AI服务提供商：
- **OpenAI**: GPT-4/GPT-3.5
- **DeepSeek**: 深度求索
- **Claude**: Anthropic Claude
- **Ollama**: 本地AI模型

### AI生成节点标识

AI生成的节点会显示 **✨图标**，方便区分手动创建和AI生成的节点

---

## ⌨️ 快捷键

### 编辑快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| **Space** | 编辑节点 | 选中节点后按空格进入编辑 |
| **Enter** | 保存编辑 / 添加兄弟节点 | 编辑时保存；选中时添加同级节点 |
| **Escape** | 取消编辑 | 恢复到编辑前内容 |
| **Shift+Enter** | 换行 | 在编辑时插入换行符 |

### 节点操作快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| **Tab** | 添加子节点 | 在选中节点下创建子节点 |
| **Delete** | 删除节点 | 删除当前选中节点 |
| **Ctrl+C** | 复制节点 | 复制当前节点及子树 |
| **/** | 折叠/展开 | 切换节点折叠状态 |

### 鼠标操作

| 操作 | 功能 | 说明 |
|------|------|------|
| **单击** | 选择节点 | 选中节点并显示操作按钮 |
| **双击** | 编辑节点 | 直接进入编辑模式 |
| **右键** | 上下文菜单 | 显示节点操作菜单 |
| **拖拽** | 移动节点 | 拖动节点到新父节点 |

---

## ❓ 常见问题

### Q1: 编辑无法退出怎么办？

**问题**: 点击外部后编辑框不消失

**解决方案**:
1. ✅ **已修复**: 使用10ms延迟确保事件处理完成
2. 按 **Enter** 或 **Escape** 键退出编辑
3. 点击其他节点会自动保存并切换

### Q2: 找不到字体样式功能？

**问题**: 不知道如何调整字体

**解决方案**:
1. ✅ **已添加**: 选中节点后，右下角会显示**紫色T按钮**
2. 也可以右键菜单 → "字体样式..."
3. 面板在右侧固定位置显示

### Q3: 中文输入法问题？

**问题**: 使用拼音输入法时编辑意外退出

**解决方案**:
1. ✅ **已修复**: 完美支持中文IME
2. 使用 `compositionstart/end` 事件
3. 只有在非组合输入状态下才会退出编辑

### Q4: 节点太多时性能卡顿？

**问题**: 大型思维导图操作不流畅

**解决方案**:
1. 使用折叠功能减少显示节点
2. 未来版本会添加虚拟化渲染优化
3. 当前建议单个思维导图不超过100个节点

### Q5: 如何保存文件？

**问题**: 不知道如何保存思维导图

**解决方案**:
1. ✅ **自动保存**: 每30秒自动保存到浏览器本地存储
2. 手动导出：点击顶部菜单 → "导出"
3. 支持导出为PNG/PDF/SVG格式

### Q6: 删除节点能恢复吗？

**问题**: 误删除节点后如何恢复

**解决方案**:
1. ❌ 当前版本不支持撤销/重做
2. 🔜 下个版本会添加历史记录功能
3. 建议重要思维导图定期导出备份

### Q7: 字体样式面板在哪里？

**问题**: 打开了字体面板但找不到

**解决方案**:
1. 字体面板固定在**右上角**（距离顶部20）
2. 如果被其他内容遮挡，按 **Escape** 关闭
3. 点击节点右下角的**紫色T按钮**重新打开

### Q8: 快捷键不生效？

**问题**: 按快捷键没反应

**解决方案**:
1. 确保已经选中节点（单击节点）
2. 某些快捷键仅在非编辑模式生效
3. 检查是否与其他应用快捷键冲突

---

## 🎯 使用技巧

### 快速构建思维导图

1. **从中心主题开始**
   - 根节点输入中心主题
   - 使用Tab快速添加主要分支

2. **批量添加节点**
   - 选中父节点
   - 连续按Enter添加多个兄弟节点
   - 然后逐个编辑内容

3. **使用AI辅助**
   - 在关键词节点按Ctrl+J
   - AI会自动扩展出相关内容
   - 再手动调整和优化

### 视觉优化建议

1. **颜色编码**
   - 不同分支使用不同颜色
   - 重要节点用鲜艳颜色突出

2. **字体层次**
   - 根节点使用较大字号（24-36px）
   - 主要分支中等字号（18-20px）
   - 详细内容小字号（14-16px）

3. **样式强调**
   - 关键节点使用粗体
   - 次要节点使用常规
   - 备注信息使用斜体

### 提高效率

1. **熟练使用快捷键**
   - Space进入编辑，Enter保存
   - Tab添加子节点，Enter添加兄弟节点
   - 比纯鼠标操作快3倍以上

2. **善用拖拽**
   - 快速调整节点层级关系
   - 重新组织思维导图结构

3. **合理折叠**
   - 完成部分折叠起来
   - 专注当前编辑内容
   - 减少视觉干扰

---

## 📊 功能状态

### ✅ 已实现功能

- [x] 节点CRUD（创建、读取、更新、删除）
- [x] 树形结构自动布局
- [x] 节点拖拽移动
- [x] 双向布局（水平/垂直）
- [x] 节点折叠/展开
- [x] 文本编辑（双击/快捷键）
- [x] 中文IME完美支持
- [x] **字体样式完整功能**
  - [x] 6种字体族
  - [x] 12-72px字号调节
  - [x] 3种字重
  - [x] 颜色选择器+预设
  - [x] 斜体/下划线
  - [x] 三种对齐方式
- [x] 节点样式面板
- [x] 导出功能（PNG/PDF/SVG）
- [x] 自动保存
- [x] 本地存储
- [x] 深色模式
- [x] AI集成（多提供商）
- [x] 快捷键支持

### 🔜 开发中功能

- [ ] 方向键导航
- [ ] 撤销/重做
- [ ] Ctrl+J AI扩展快捷键
- [ ] Ctrl+S 手动保存
- [ ] 批量样式编辑
- [ ] 节点搜索

### 📋 计划中功能

- [ ] 实时协作
- [ ] 云端同步
- [ ] 模板库
- [ ] 图标/Emoji支持
- [ ] 超链接/图片
- [ ] 标签系统
- [ ] 甘特图视图
- [ ] 移动端支持

---

## 🐛 已知问题

### 修复记录

1. ✅ **编辑状态无法退出**
   - 问题：点击外部后编辑框不消失
   - 修复：使用setTimeout(10ms)确保事件处理完成

2. ✅ **中文输入法冲突**
   - 问题：使用拼音输入法时编辑意外退出
   - 修复：监听composition事件

3. ✅ **字体样式状态不同步**
   - 问题：样式更新显示延迟
   - 修复：移除localState，直接更新节点样式

4. ✅ **找不到字体样式入口**
   - 问题：用户不知道如何打开字体面板
   - 修复：添加紫色T快捷按钮

### 当前限制

1. **性能**
   - 大型思维导图（>100节点）可能卡顿
   - 建议：使用折叠功能减少渲染

2. **撤销/重做**
   - 暂不支持
   - 临时方案：定期导出备份

3. **移动端**
   - 暂未优化移动端体验
   - 建议：使用桌面端浏览器

---

## 📞 反馈与支持

### 问题反馈

如果您遇到问题或有建议：

1. **GitHub Issues**: [项目Issues页面]
2. **文档**: 查看项目README.md
3. **日志**: 打开浏览器控制台查看错误信息

### 学习资源

- [思维导图最佳实践](https://xmind.cn/learning/)
- [XMind使用教程](https://xmind.cn/tutorials/)
- [Miro协作指南](https://miro.com/guides/)

---

## 📝 更新日志

### v1.0.0 (2025-12-29)

**新增功能**:
- ✨ 完整字体样式系统
- ✨ 字体样式快捷按钮（紫色T按钮）
- ✨ 实时预览功能

**修复**:
- 🐛 修复点击外部编辑不退出问题
- 🐛 修复字体样式状态同步问题
- 🐛 优化中文IME输入体验

**优化**:
- ⚡ 移除未使用的useState
- ⚡ 使用useMemo优化节点查找
- ⚡ 清理console.log

---

**祝您使用愉快！** 🎉

AImind Team - 让思维更自由
